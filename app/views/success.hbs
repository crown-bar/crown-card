<div class="success-container" id="success-container">
    <div class="success-wrapper">
        <img class="success-image" src="/images/Checkmark.svg" alt="Checkmark">
        <p id="activity">{{activity}}</p>
        <p>Successfully</p>
    </div>
</div>

<p class="success-countdown">Automatically returning to<br>Card Overview in <span id="time-remaining">3</span> seconds</p>

<script>
    // Choose background color
    const activity = document.querySelector('#activity')
    const successContainer = document.querySelector('#success-container')

    switch (activity.textContent) {
        case 'Charged':
            successContainer.classList.add('success-container-red')
            break
        case 'Added':
            successContainer.classList.add('success-container-green')
            break
        case 'Created':
            successContainer.classList.add('success-container-green')
            break
    }

    // Automatic Redirect after 3 Seconds
    const timeRemainingSpan = document.querySelector('#time-remaining')
    let timeRemaining = 2

    function redirect () {

        if (timeRemaining > 0) {
            timeRemainingSpan.innerHTML = timeRemaining.toString()
            timeRemaining--
        } else {
            clearInterval(intervalID)
            window.location.href = "/card"
        }
    }

    const intervalID = setInterval(redirect, 1000)

</script>
